<!DOCTYPE html>
<html layout:decorate="~{layout}">
<head>
<meta charset="UTF-8" />
<title>Cadastrar Servidor</title>

<!-- jQuery e jQuery Mask -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
</head>

<body>
<section class="layout-content" layout:fragment="corpo">
	<nav class="navbar navbar-expand-md bg-light">
		<div class="navbar-collapse" id="navbarsExampleDefault">
			<ul class="navbar-nav float-right">
				<li class="nav-item active">
					<i class="oi oi-caret-right"></i>
					<span>Cadastrar Servidor</span>
				</li>
			</ul>
			<a class="btn btn-primary ms-1" href="/servidores/listar" role="button">
				<span class="oi oi-spreadsheet" title="Listar"></span>
				<span>Listar Servidores</span>
			</a>
		</div>
	</nav>

	<div class="container mt-4">
		<div th:if="${sucesso} != null" class="alert alert-success">
			<i class="oi oi-check"></i> <strong th:text="${sucesso}"></strong>
		</div>

		<form th:action="@{/servidores/salvar}" th:object="${servidor}" method="POST" class="needs-validation" novalidate>

			<div class="row mb-3">
				<div class="col-md-6">
					<label for="nome">Nome</label>
					<input type="text" class="form-control" th:field="*{nome}" placeholder="Nome completo" required minlength="3" maxlength="100" />
					<div class="invalid-feedback">Informe um nome válido.</div>
					<div class="text-danger" th:errors="*{nome}"></div>
				</div>

				<div class="col-md-6">
					<label for="email">E-mail</label>
					<input type="email" class="form-control" th:field="*{email}" placeholder="email@ifpb.edu.br" required />
					<div class="invalid-feedback">Informe um e-mail válido.</div>
					<div class="text-danger" th:errors="*{email}"></div>
				</div>
			</div>

			<div class="row mb-3">
				<div class="col-md-6">
					<label for="cpf">CPF</label>
					<input type="text" id="cpf" class="form-control" th:field="*{cpf}" placeholder="000.000.000-00" required />
					<div class="invalid-feedback">Informe um CPF válido.</div>
					<div class="text-danger" th:errors="*{cpf}"></div>
				</div>

				<div class="col-md-6">
					<label for="cargo">Cargo</label>
					<input type="text" class="form-control" th:field="*{cargo}" placeholder="Ex: Técnico Administrativo" required />
					<div class="invalid-feedback">Informe o cargo.</div>
					<div class="text-danger" th:errors="*{cargo}"></div>
				</div>
			</div>

			<div class="row mb-3">
				<div class="col-md-6">
					<label for="salario">Salário (R$)</label>
					<input type="text" id="salario" class="form-control" th:field="*{salario}" placeholder="Ex: 4500,00" required />
					<div class="invalid-feedback">Informe o salário.</div>
					<div class="text-danger" th:errors="*{salario}"></div>
				</div>
			</div>

			<button type="submit" class="btn btn-primary">Salvar</button>
		</form>
	</div>
</section>

<!-- Máscaras -->
<script>
$(document).ready(function(){
    $('#cpf').mask('000.000.000-00');
    $('#salario').mask('000.000.000,00', {reverse: true});

    // Validação Bootstrap
    (function () {
        'use strict'
        const forms = document.querySelectorAll('.needs-validation')
        Array.from(forms).forEach(form => {
            form.addEventListener('submit', event => {
                if (!form.checkValidity()) {
                    event.preventDefault()
                    event.stopPropagation()
                }
                form.classList.add('was-validated')
            }, false)
        })
    })()
});
</script>
</body>
</html>
